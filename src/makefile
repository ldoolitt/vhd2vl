# simplified version for general use, so as not to look so intimidating
WARNS = -Wall -W
# Even this level flags a known problem with flex-2.6.1 output, regarding
# signed/unsigned comparison in YY_INPUT.

# Developers or anal compulsives: uncomment the following WARNS definition.
# Leave off -Wtraditional-conversion until flex and bison get cleaned up.
# Use -W for now instead of the more modern -Wextra, since lots of people
# still use older compilers.
WARNS = -Wall -W -Wshadow -Wundef -Wredundant-decls -Wpointer-arith -Wcast-qual -Wpointer-arith -Wcast-align -Wcast-qual -Wsign-compare -Wwrite-strings -Wstrict-prototypes -Wformat=2 -pedantic
# Code generated by yacc-3.0.2 fails -Wstrict-overflow=5

# any of the following three should work:
# STANDARD =
# STANDARD = --std=c89 -D_DEFAULT_SOURCE
STANDARD = --std=c99 -D_DEFAULT_SOURCE
# some older versions of libc might need -D_POSIX_C_SOURCE -D_BSD_SOURCE
# instead of -D_DEFAULT_SOURCE

vhd2vl : lex.yy.c vhd2vl.tab.c
	$(CC) ${STANDARD} ${WARNS} -O2 -g -o vhd2vl lex.yy.c vhd2vl.tab.c

vhd2vl.tab.c : vhd2vl.y def.h
	bison -d -v -t vhd2vl.y

lex.yy.c : vhd2vl.l def.h
	flex -i vhd2vl.l

clean :
	rm -f lex.yy.c vhd2vl.tab.c vhd2vl.tab.h vhd2vl.output  vhd2vl
